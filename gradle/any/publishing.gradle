// safe to apply to root project.
apply plugin: 'maven-publish'

// keeps track of any project with published components
publishedProjects.add(project)

tasks.withType(GenerateModuleMetadata) {
  enabled = false
}

publishing {
  repositories {
    String version = rootProject.version as String
    if (version.endsWith('SNAPSHOT')) {
      maven {
        name = 'snapshots'
        url = project.hasProperty('snapshotsUrl') ? snapshotsUrl : 'https://artifacts.unidata.ucar.edu/repository/unidata-snapshots/'
        // Set credentials in root/publishing.gradle.
      }
    } else {
      maven {
        name = 'releases'
        url = project.hasProperty('snapshotsUrl') ? snapshotsUrl : unidataReleasesUrl
        // Set credentials in root/publishing.gradle.
      }
    }
  }
}
